今天晚上讨论的话题很有意思，涉及到概率、期望、先验、决策等，与我之前的一些思考密切相关且有很多新的思考。

---

我是先在小红书上看到一个关于“双信悖论”的帖子，说的是如果你面前有两个一样的红包，其中一个的金额是另一个的两倍。现在你选择了一个红包，打开发现其中有100元。现在给你一次更换红包的机会，请问你是否更换？我相信你一开始也和我一样，习惯性的计算更换后的期望收益，作为是否更换的决策依据。同时你也惯性的认为，另一个红包中是50元和200元的概率相等，都是50%。那么答案似乎显而易见了，计算后的期望收益为125元，所以当然要更换。
好巧不巧，你又习惯性的进行了一般化的思考。既然观测到100元的情况下，你选择更换红包，那么假如观测到X元的情况下呢？你熟练的用X代替100带入之前的期望公式中计算，得到5/4X，显然也比X大，因此你还是选择更换红包。
现在，问题来了。既然无论你打开红包观测到何种金额，最终的决策结果都是更换红包，那你何不在打开红包之前就更换红包呢？且慢！你发现了事情的不合理之处：在打开其中一个红包之前，面前的两个红包信息完全对称，对你来说没有任何区别，因此两个红包的期望收益对你来说是一样的，你没有理由拿着手上的一个红包去换另一个红包。换句话说，如果你更换红包能获得更多的收益，那对于另一方来说，他也可以用同样的逻辑更换红包，换取更多的收益，总得有一方应该亏损吧？

这就是所谓的“双信悖论”的问题，我一开始也百思不得其解，于是又重新搜索了相关的视频。其中一个视频分三个视角“红更换”“蓝一样”“黄难说”进行辩论，最终似乎是黄方的逻辑更有道理，但是黄方提出的“你不清楚老板的随机方式”也依旧让我困惑。我暂且不分析这个视频，下面我先分享一个后面看到的解释的最好的（我认为）版本，然后再回来讨论这三方的观点。

---

这个视频是一个外国人做的，用清晰的数学方式回答了这个看起来是一个悖论的问题。
首先，我们可以先假定金钱的分布情况是已知的，关于未知的情况可以稍后讨论。我们假定两个红包中的金额是无穷个幂等二元数组组成的，比如（1，10），（10，100），（100，1000），……每种组合的概率分别是1/2，1/4，1/8，……可以看出所有可能的组合情况满足概率和为1.
接下来，我们讨论在看到其中一个红包的金额时是否要更换。我们可以依次罗列观测结果和对应的决策：如果观测值是1元，在此情况下另一个红包中只可能是10元，更换后增益是10-1=9元，决策是更换；如果观测值是10元，在此情况下另一个红包中有2/3的概率是1元，1/3的概率是100元（请回顾条件概率的计算公式），更换后的增益是34-10=24元，决策同样是更换；如果观测值是100元，在此情况下另一个红包中有2/3的概率是10元，1/3的概率是1000元，更换后的增益是240元，决策是更换；……因此，无论观测到何种结果，你的决策都应该是更换。
那么，“打开一个红包后，无论是什么结果都应该更换为另一个红包”是否能推导出“不打开红包也应该更换为另一个红包”呢？这时候，我们需要思考清楚在不打开红包的情况下，我们判断是否应当更换红包的“决策依据是什么”。我们同样先用“更换红包后的期望增益是否为正值”作为决策依据，如果为正，则更换，如果为负，则不更换，如果为零，则更不更换结果没影响。
于是问题转换为如何计算在不打开红包的情况下更换红包带来的期望增益。根据期望的定义，获得9元增益的概率为1/4（有1/4的概率抽到1元，更换后增益9元），获得-9元增益的概率为1/4（有1/4的概率抽到（1，10）组合中的那个10元，更换后增益-9元），获得90元增益的概率为1/8（有1/8的概率抽到（10，100）组合中的那个10元，更换后增益90元），以此类推，计算公式为：9×1/4-9×1/4+90×1/8-90×1/8+……，两两组合，总的期望增益就是零，所以在不打开红包的情况下更换红包带来的期望增益是零元，则更不更换结果没影响。但是期望还用另一种计算方式：根据重期望公式，不打开红包的情况下的期望增益等于打开后观测到特定金额的概率（比如观测到是10元的概率就是1/4+1/8=3/8）与打开后更换红包获得的期望增益（观测到10元情况下更换的期望增益为24元）的乘积，然后再求和（请直接上网搜索重期望公式就知道我在说什么了），由前两段的讨论可知，打开红包下更换的期望增益始终为正，观测的概率也是大于零的值，相乘累加后的结果始终大于0，因此在不打开红包的情况下更换红包带来的期望增益是一个正值，当然要更换红包。
同一种情况下出现了两种结果和策略，问题到底出在了哪里？答案是【在无穷级数求和的背景下，如果正项的和与负项的和都是无穷，那么变换求和顺序得到的结果就会不一样】，因此在不打开红包的情况下，期望增益是【无法定义的】，我们无法利用期望增益的结果到底大于零小于零还是等于零来做决策。同样，使用重期望公式的前提条件是期望存在。因此我们不能通过“打开一个红包后，无论是什么结果都应该更换为另一个红包”推导出“不打开红包也应该更换为另一个红包”。

至此，我们总结一下。在已知先验分布的情况下，每当我们打开红包得到观测值后，我们总可以用条件概率的公式计算出更换红包带来的期望增益（这个值可能是正也可能是负或零，与先验分布的具体形式有关），然后根据期望增益来决定是否更换红包。如果我们不打开红包，此时由于无穷级数的性质，增益期望是无法定义的，不能通过期望增益来判断是否应该更换红包。（但是我们可以从信息对称的角度认为更不更换的效果一样，一点个人理解）。

---

那么，在先验分布未知的情况下，也就是我们一开始讨论的问题下（只告诉你其中一个金额是另一个的两倍），结论如何呢？
在先验分布未知的情况下，我们确实不知道到底有多少种组合，以及每种组合出现的概率是多少。但是每当我们观测到金额X的时候，整个组合空间只剩下两种可能性：（1/2X，X），（X，2X），但我们依然不知道这两种可能性的相对大小关系（回顾一下在先验分布已知的情况下我们是如何计算期望增益的）。假设（2X，X）在整个组合空间中出现的概率是p，（X，1/2X）在整个组合空间中出现的概率是q，那么在抽中X的情况下，更换红包后得到的期望增益就应该为E = Xp/(p+q)-0.5Xq/(p+q) = X(p-0.5q)/(p+q)，在X只取正数的条件下，想要期望增益大于零，需要满足的条件是q<2p。因此，如果我们既不知道先验分布，也不知道出现这两种可能性的相对大小关系，就无法通过计算期望增益的方式来判断是否应该更换红包。此时我们可以说“观测到一个红包的奖金是100元”是一个“无用信息”，对我们做出是否应该更换红包的决策并无帮助。但是但凡我们知道一点点额外的信息，比如我们知道老板很大方，出现（100元，200元）组合的可能性高于（50元，100元）组合的可能性，即p>q，满足q<2p的条件，那么根据期望增益就很容易知道更换红包才是正确的选择。类似的，如果我们知道金额的取值范围在1-10000之间且服从均匀分布，那么抽中100元的条件下，更换红包大概率可以获得更大的收益。

至此，整个“双信悖论”的解释到此为止了，如果你感兴趣，可以接着我的思路去分析第一个视频中红黄蓝三方的观点各自有什么得当和遗漏之处。虽然我讲的有些啰嗦，但整体的思路还算比较清晰的。如果有逻辑错误，也恳请指出，不胜感激！

---

参考视频：
[三方争论视频](https://www.bilibili.com/video/BV1DjUvBuE1i/?spm_id_from=333.337.search-card.all.click&vd_source=6ed1bc537d8121fdc386019604381f3f)

[深刻讲解版视频](https://www.bilibili.com/video/BV1wY41117RR?buvid=XU1A31317B68FDF3CA39C530C5936AF80A4EB&from_spmid=search.search-result.0.0&is_story_h5=false&mid=WLwEQeM8OB8U5y%2F6FN%2FfCg%3D%3D&plat_id=116&share_from=ugc&share_medium=android&share_plat=android&share_session_id=50407813-470d-4a45-aa8e-63e64ce2ea70&share_source=COPY&share_tag=s_i&spmid=united.player-video-detail.0.0&timestamp=1764248275&unique_k=ZRm6qCL&up_id=166742095&vd_source=6ed1bc537d8121fdc386019604381f3f)
